
**内存分配与回收**

内存分配与回收是操作系统中的关键任务，它们确保进程能够获得所需的内存空间并在不再需要时释放该空间。

### 1. **内存分配**

当一个进程需要运行时，它需要一定的内存空间来存储其代码、数据和堆栈。操作系统的任务是为这些进程分配内存。

**种类**：

- **连续内存分配**：进程在物理内存中占据连 续的地址空间。例如，单一连续分配、固定分区分配和动态分区分配。

- **非连续内存分配**：进程可以分散在物理内存的不同部分。例如，分页和分段。

### 2. **内存回收**

当进程完成执行或被终止时，它占用的内存需要被回收，以便可以被其他进程使用。

**方法**：

- **引用计数**：跟踪每块内存被多少进程引用。当引用计数降为零时，内存被回收。

- **垃圾回收**：例如，在某些高级语言中，如Java，自动检测不再使用的内存并回收它。

- **手动回收**：在某些语言中，如C和C++，程序员负责显式释放不再使用的内存。

### 3. **碎片**

内存分配和回收可能导致碎片，这是未使用的内存块。

- **内部碎片**：分配给进程但未使用的内存。
. 、
- **外部碎片**：内存中的小块空闲空间，它们太小而不能被有效使用。

**解决方法**：

- **紧凑**：将进程移动到内存的连续位置，从而消除外部碎片。

- **分页和分段**：通过将内存分为固定大小的块或根据进程的需求来消除外部碎片。

### 示例：

想象一个书架，你正在为各种大小的书找地方。当你放置和移除书籍时，可能会留下一些小的空隙，这些空隙就像内存中的碎片。为了最大化书架的使用，你可能需要重新排列书籍，使它们更紧凑，这就像内存中的紧凑操作。