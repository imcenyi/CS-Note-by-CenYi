**请求分页存储管理 (Demand Paging)**

请求分页存储管理是一种内存管理策略，其中只有当程序需要某一页时，该页才被加载到物理内存中。这种策略允许计算机执行比其物理内存大得多的程序。

### 1. **基本概念**：

- **页 (Page)**：程序和其数据被划分为固定大小的块，称为页。

- **页表 (Page Table)**：操作系统为每个进程维护一个页表，用于映射虚拟页到物理内存中的页帧。

- **页帧 (Page Frame)**：物理内存被划分为与页相同大小的块，称为页帧。

### 2. **工作原理**：

- **按需加载 (Demand Loading)**：当进程开始执行时，它的页不会立即全部加载到内存中。只有当进程尝试访问一个不在内存中的页时，该页才被加载。这称为按需加载。

- **页面错误 (Page Fault)**：如果进程尝试访问一个不在内存中的页，会发生页面错误。操作系统会从磁盘上加载所需的页，并可能需要将其他页换出到磁盘。

### 3. **优点**：

- **内存利用率**：由于只有实际需要的页才被加载到内存中，这可以提高内存的使用效率。

- **允许大型程序**：请求分页允许计算机执行比其物理内存大得多的程序。

- **灵活性**：页可以独立地加载和卸载，提供了灵活性。

### 4. **缺点**：

- **页面错误的开销**：处理页面错误需要时间，尤其是当需要从磁盘上加载页时。

- **可能的频繁页面交换**：如果物理内存不足，可能需要频繁地将页换入和换出，这称为抖动。

### 5. **应用**：

请求分页存储管理是现代操作系统中最常用的内存管理策略，如Windows、Linux和macOS。

### 示例：

想象一个大型图书馆，其中有成千上万的书籍。当读者想要借阅一本书时，他们会到图书馆的柜台请求。如果这本书当前不在柜台上，图书管理员会去书库中取出这本书。这就像请求分页的工作方式，其中每本书代表一个页，读者代表进程，柜台代表物理内存，而书库代表磁盘存储。